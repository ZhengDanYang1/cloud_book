# 第2节：服务状态

有状态*（**Stateful**）*和无状态*（**Stateless**）*服务分离

在云原生时代，中间件架构设计时需要定义服务的状态：有状态部分和无状态部分，无状态部分主要伴随业务逻辑的产生，如服务间通信、链路跟踪等。无状态服务是指该服务运行的实例不会在本地存储数据，并且多个实例对于同一个请求响应的结果是完全一致的。

有状态服务是指该服务的实例可以将一部分数据随时进行备份，并且在创建一个新的有状态服务时，可以通过备份恢复这些数据，以达到数据持久化的目的。所以将状态保存在有状态的中间件中，如分布式缓存、消息队列等。

无状态的业务逻辑部分可以很容易的横向扩展，在用户分发的时候，可以很容易分发到新的进程进行处理。在有状态中间件设计时，应考虑扩容时状态的迁移、复制、同步等机制，以更好的支撑无状态的业务层。